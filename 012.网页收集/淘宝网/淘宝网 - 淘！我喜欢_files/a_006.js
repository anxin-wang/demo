KISSY.add("fp/index-e",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=b.all;return window.FP={lazyQueue:[],tickQueue:[],trackQueue:[],is_tanx_ssp_lazy:!0,loaded:!1,modules:{},directPromo:d},e.tin("renderHD"),o.init("renderHD"),e.nextTick(function(){new n}),e.nextTick(function(){p.init()}),c(),e.nextTick(function(){new f}),e.nextTick(function(){new g}),e.nextTick(function(){new h}),e.nextTick(function(){(new d).load().then(function(a){new l,new m(a)}).fail(function(){new l,new m})}),e.nextTick(function(){new i}),e.nextTick(function(){new j}),e.nextTick(function(){new k}),e.nextTick(function(){}),e.nextTick(function(){s(".J_CatMore").on("click",function(a){a.halt(),e.goldlog("16","","H46896573"),e.trace("2014.73","H46896570");var b=s("#J_BdMain");if(b.length){var c=b.offset().top-96,d=new r(s(window),{scrollTop:c},.4,"easeOutStrong");d.run()}})}),e.lazyLoad(function(){a.use("fp/screen-bd-e",function(a,b){new b})}),e.lazyLoad(function(){a.use("fp/screen-ft",function(a,b){new b})}),e.lazyLoad(function(){a.getScript("http://g.tbcdn.cn/tb/fdc/xwj.js",function(){window._ap_xwj&&_ap_xwj.monitor("201405203565400480",{sample_rate:.01,dead_line:14160672e5})})}),e.lazyLoad(),e.lazyLoad(function(){new q}),!0},{requires:["node","./base/global","./mods/promo/direct-promo","./base/util","./mods/header/search","./mods/header/sticky-search","./mods/header/nav","./mods/notice/notice","./mods/member/member","./mods/conve/conve","./mods/promo/promo","./mods/tmall/tmall","./mods/promo/tanx","./mods/apollon/apollon","./mods/response/response","./mods/birthday/index","anim"]});KISSY.add("fp/base/global",function(){var a=TB.Global,b=a.util,c=window,d=c.document,e=d.body,f=function(){this.init()};return f.prototype.init=function(){var b=this;!a.isIE6&&b.bind()},f.prototype.bind=function(){function d(){var c=b.scrollTop(),d="site-nav-fixed",g=parseInt(b.css(a.el,"height")),h=parseInt(b.css(e,"paddingTop"));c>0?f.isFixed||(f.isFixed=!0,b.addClass(a.el,d),b.css(e,"paddingTop",h+g+"px")):f.isFixed&&(f.isFixed=!1,b.removeClass(a.el,d),b.css(e,"paddingTop","0px"))}var f=this;a.isFixed=!0,f.isFixed=!1,b.addEvent(c,"scroll",d),d()},function(){b.addEvent(window,"load",function(){FP&&(FP.load=!0)}),a.blacklist=["fn-webww","fn-tlabs","fn-feedback"],a.init(),new f,a.use("fn-browser-update",function(a,b){new b})}});KISSY.add("fp/mods/promo/direct-promo",function(a,b,c){var d=b.all,e=["544"],f=[541],g=[],h=/^https?:\/\/\S+(png|jpg|jpeg|gif)$/i,i=/^https?:\/\/\S+$/i,j=/https?:\/\/\S+swf/i,k="http://ald.taobao.com/recommend2.htm",l=TB.Global,m=l.util,n=function(){var b=d(".J_Ald");return b.each(function(b){var c=a.trim(b.attr("data-ald"));c&&e.push(c)}),this.data={},this};return n.prototype.load=function(){var a=this;return new c({type:"get",url:k,data:{appId:e.join(",")},timeout:10,dataType:"jsonp"}).then(function(b){var c=b[0];return a.data=c,a.setData(c,a.setCont),c})},n.prototype.getDPEl=function(a){var b=d(".J_Ald_"+a);return b.length||(b=d(".J_DP_"+a)),b.length?b.getDOMNode():d("")},n.prototype.makeUrl=function(b){return b+"?resourceIds="+g.join(",")+"&t="+a.now()},n.prototype.setData=function(b){var c=this;a.each(b,function(b,e){var f=b.data;if(!a.isArray(f)&&!f.length)return!0;if("03014"===e)return!0;var g=d(".J_Ald_"+e);g.each(function(b){var d=b.all("a");d.length||(d=b),d.each(function(b,e){var g=f[e];if(d.length>1&&(g=!1),a.each(f,function(a){Number(a._pos_)-1===e&&(g=a)}),!g)return!0;var h=g.content;if(!h)return!0;var i=g.linke||g.link;i||"S"!==!b.getDOMNode().tagName.toUpperCase()||(b=b.parent(".J_Ald")),"http://tms.tms.tms"!=h&&""!=h&&c.setCont({pit:b.getDOMNode(),content:h,link:i})})})})},n.prototype.setCont=function(b){var c,g=this,k=null,n=parseInt(b.id)||"",o=b.content,p=b.link;if(!l.isMobile||544!==n||!j.test(o)){if(c=n?g.getDPEl(n):b.pit,h.test(o)){if(a.inArray(n,e))return m.addClass(c,"J_DPLazy"),c.setAttribute("data-cont",o),void c.setAttribute("data-link",p);k=a.inArray(n,f)?'<img src="//g.tbcdn.cn/s.gif" style="background-image:url('+o+')" />':'<img src="'+o+'" />'}else i.test(o)?(p=null,k='<iframe src="'+o+'" scrolling="no" frameborder="0" width="330" height="200"></iframe>'):k=o||"";p&&"A"===c.tagName.toUpperCase()?(c.innerHTML=k,c.setAttribute("href",p)):(k||(p?k='<a href="'+p+'">'+k+"</a>":""),"S"===!c.tagName.toUpperCase()?c.innerHTML=k:(d(c).parent().append(d(k)),d(c).remove()))}},n},{requires:["node","io"]});KISSY.add("fp/base/util",function(a,b,c){var d=b.all,e=d(window),f=d("body"),g=window.FP||{lazyQueue:[],tickQueue:[]};if(!window.ActiveXObject&&window.postMessage){var h=g.tickQueue,i=function(a){if(a.source==window&&"tick"==a.data&&(a.stopPropagation(),h.length>0)){var b=h.shift();b()}};window.addEventListener("message",i,!0)}new c.Defer;return{lazyLoad:function(b){var c=g.lazyQueue,d=function(){g.loaded||(g.loaded=!0,a.each(c,function(a){a()})),f.detach("scroll mousemove mousedown keydown",d)};if(b)c.push(b);else{if(g.load)d();else{var h=this;e.on("load",function(){h.tin("load"),d()})}f.on("scroll mousemove mousedown keydown",d)}},nextTick:function(a){var b=g.tickQueue;window.ActiveXObject||!window.postMessage?setTimeout(function(){a()},0):(b.push(a),window.postMessage("tick","*"))},tin:function(b){this.start?a.log(b+" at:"+(+new Date-this.start)):this.start=+new Date},goldlog:function(b,c,d){return window.goldlog?void(goldlog.record&&(c&&(c=a.param(c)),goldlog.record("/tbindex.2014."+b,"",c||"",d||""))):!1},trace:function(a,b){return window.goldlog?(b||(b="H46896569"),void(goldlog.trace&&goldlog.trace("/tbindex."+a,"","",b))):!1}}},{requires:["node","promise"]});KISSY.add("fp/mods/header/search",function(a,b,c,d){var e=a.all,f=document,g=function(){this.el=e("#J_Search"),this.$ft=e("#J_SearchFt"),this.$tab=e("#J_SearchTab"),this.$q=e("#q"),this.$label=e(".J_Placeholder"),this.forms=f.forms.search,this.$icon=e("#J_SearchIcon"),this.events={"mouseenter #J_SearchTab":"toggleTabHandler","mouseleave #J_SearchTab":"toggleTabHandler","click .J_SearchTab":"clickTabHandler","focusin #q":"focusInputHandler","focusout #q":"blurInputHandler","keyup #q":"keyupInputHandler","click #J_SearchIcon":"clickIconHandler"},this.init()};return a.extend(g,b),g.prototype.init=function(){var a=this;a.initSearchSuggest(),a.setSPM("1997520841"),g.superclass.constructor.call(a)},g.prototype.initSearchSuggest=function(){var b=this;a.use("tbc/search-suggest/1.3.7/,tbc/search-suggest/1.3.7/plugin/history,tbc/search-suggest/1.3.7/plugin/cloud,tbc/search-suggest/1.3.7/plugin/tab,tbc/search-suggest/1.3.7/plugin/history-magic,tbc/search-suggest/1.3.7/new_suggest.css",function(a,c,d,g,h,i){var j=this,k=["history","c2c_activity","dapei_top","cat","global","list","dapei_bottom","scene","shop","tmall","cloud"],l=[new d,new h({activeCls:"selected",node:"#J_Search li.J_SearchTab"}),new g,new i],m="http://suggest.taobao.com/sug?k=1&area=c2c",n=!(e(f).scrollTop()>0),o="",p=new c({plugins:l,sugConfig:{sourceUrl:m,node:"#q",focused:n,resultFormat:o},mods:{sort:k,tmall:{tmpl:['<div class="{prefixCls}menu-extras-cate extras-mall" data-key="q={tmall}&suggest=tmall_{$index}&tab=mall">','<span class="{prefixCls}menu-key">{tmall}</span>',"<b>天猫相关</b>","</div>"].join("")},scene:{tmpl:['<div class="{prefixCls}menu-extras-cate extras-scene" data-action="http://fa.taobao.com/search" data-key="q={scene}&suggest=scene_{$index}">','<span class="{prefixCls}menu-key">{scene}</span>',"<b>装修宝典/选购秘籍</b>","</div>"].join("")}}});p.comboBox.on("beforeShow",function(){FP.$sug||(FP.$sug=p.get("menu").get("el"))}),p.comboBox.on("click",function(){e("#J_Wrap").hasClass("wrap-fixed")?b.goldlog("11",{type:2},"H46896547"):b.goldlog("11",{type:1},"H46896547")}),11===a.UA.ie&&p.comboBox.get("menu").on("afterRenderUI",function(){this.get("el").on("click",{fn:function(a){p.comboClick(a)},once:!0})}),b.comboBox=p.comboBox,n||j.forms&&(j.forms.className=""),e(".btn-search").on("click",function(c){c.halt();var d,f=b.$q,g=e("#J_TSearchForm");""===a.trim(f.val())&&(b.isTmall?(d=e(".J_TmallPlaceholder").children("label").attr("data-q"),b.hidden(!0,"from","tbmain_1_placeholder")):(b.setSPM("1997520841","d20"),d=e(".J_TbPlaceholder").all("span").text(),b.hidden(!1)),b.$label.hide(),f.val(d)),g.fire("submit")})})},g.prototype.setSPM=function(a,b){var c=this,d=["1"];d.push("7274553"),d.push(a),b||(b="1"),d.push(b),c.forms.spm.value=d.join(".")},g.prototype.toggleTabHandler=function(a){var b=this,c=a.type;"mouseenter"===c?b.$tab.addClass("triggers-hover"):b.$tab.removeClass("triggers-hover")},g.prototype.clickTabHandler=function(a){var b=this,c=e(a.currentTarget);if(e("#J_Wrap").hasClass("wrap-fixed")){var d=e("ul",b.$tab),f=d.item(0);c[0]!==f[0]&&d.prepend(c)}b.forms.search_type.value=c.attr("data-searchType"),b.isTmall="true"===c.attr("data-tmall"),b.isTmall?(e(".J_SearchPanel").addClass("tmall-search-panel"),b.setSPM("5803581","d4908513"),b.loadTmallWord(),e(".J_TmallSearchContent").show(),e(".J_TbSearchContent").hide()):(e(".J_SearchPanel").removeClass("tmall-search-panel"),b.setSPM("1997520841"),e(".J_TmallSearchContent").hide(),e(".J_TbSearchContent").show())},g.prototype.hidden=function(a,b,c){var f=e(".J_SearchPanel").all("form");if(a){var g='<input type="hidden" name="{{name}}" value="{{value}}" class="hidden-{{name}}">',h=new d(g).render({name:b,value:c});e(".hidden-"+b).length||f.append(h)}else{var i=e(".hidden-"+b);i.length&&i.remove()}},g.prototype.loadTmallWord=function(){var a=this;if(a.tmallWord)return a.tmallWord;var b='<div class="search-hots">{{#each list}}<a href="http://list.tmall.com/search_product.htm?sourceId=tb.index&commend=all&q={{query}}&from=tbmain_1.{{xindex}}_hq" {{#if highlight}} class="h"{{/if}}>{{query}}</a>{{/each}}</div>';c({url:"http://suggest.taobao.com/sug?area=tmall-hq&code=utf-8&src=tbmain",scriptCharset:"utf-8",dataType:"jsonp"}).then(function(c){var f=c[0];if(f.success){a.tmallWord=f;var g=f.model,h=g.placeholder[0];e(".J_TmallPlaceholder").all("label").text(h.text).attr("data-q",h.query);var i=new d(b).render(g);e(".J_TmallHotWord").html(i)}})},g.prototype.focusInputHandler=function(){var a=this;a.forms.className="search-panel-focused"},g.prototype.blurInputHandler=function(){var b=this;""===a.trim(b.$q.val())&&(b.forms.className="")},g.prototype.keyupInputHandler=function(){var b=this;""===a.trim(b.$q.val())?(e(".J_Placeholder").hide(),b.isTmall?e(".J_TmallSearchContent").show():e(".J_TbPlaceholder").show(),b.$icon.show()):(b.$label.hide(),b.$icon.hide())},g.prototype.clickIconHandler=function(){var a=this;a.$q.fire("focus")},g},{requires:["../../base/module","ajax","xtemplate"]});KISSY.add("fp/base/module",function(a,b,c){var d=a.all,e=function(){this.bindEvents()};return e.tap=c.Gesture.tap,e.prototype.bindEvents=function(){var b=this;b.el&&b.events&&a.each(b.events,function(a,c){if(c&&a&&~c.indexOf(" ")){var e=c.replace(" ","^").split("^"),f=e[0],g=e[1],a=b[a]||a;d(b.el).delegate(f,g,a,b)}})},e.prototype.getAjaxUrl=function(a){var b=new RegExp("daily.taobao.net").test(location.href.split("?")[0]),c=b&&"http://www.daily.taobao.net/"||"http://www.taobao.com/";return c+"2014/ajax/"+a+".php"},e.prototype.getTMSHook=function(b){var c=b.split("_");return a.each(c,function(a,b){c[b]=a.substring(0,1).toUpperCase()+a.substring(1)}),"#J_"+c.join("")},e.prototype.isInit=function(a){var b=FP.modules;return b[a]&&b[a].init===!0?!0:(b[a]={},b[a].init=!0,!1)},e.prototype.trackPoint=function(b){var c=FP.load,d=FP.trackQueue,e=function(a){var b=new Image,c="_img_"+Math.random();window[c]=b,b.onload=b.onerror=function(){window[c]=null},b.src=a};b&&d.push(b),c&&(a.each(d,function(a){e(a)}),d.length=0)},e.prototype.loadTanxAd=function(a){tanx_ssp_lazy=window.tanx_ssp_lazy||[],tanx_ssp_lazy.push(a)},e.prototype.loadTanx=function(b,c){var d=window,e={i:b,sd:"ecpm.tanx.com"};return c&&(e.sd="toruk.tanx.com"),d.tanxssp_show?void d.tanxssp_show(e):(d.tanx_ssp_onload=d.tanx_ssp_onload||[],d.tanx_ssp_onload.push(e),void a.getScript("http://cdn.tanx.com/t/tanxssp.js",function(){},"gbk"))},e.prototype.goldlog=function(b,c,d){return window.goldlog?void(goldlog.record&&(c&&(c=a.param(c)),goldlog.record("/tbindex.2014."+b,"",c||"",d||""))):!1},e.prototype.trace=function(a,b){return window.goldlog?(b||(b="H46896569"),void(goldlog.trace&&goldlog.trace("/tbindex.2014."+a,"","",b))):!1},e},{requires:["node","event"]});KISSY.add("fp/mods/header/sticky-search",function(a,b,c,d){var e=d.all,f=TB.Global,g=e(window),h=function(){6!==c.ie&&this.init()};return a.extend(h,b),h.prototype.init=function(){var a="wrap-fixed",b=!1,c=!1,d=e(f.el),h=d.height(),i=e("#J_Wrap"),j=e("#J_HdHead"),k=function(){var d=g.scrollTop(),k=i.offset().top;d>k+100?(b||(b=!0,i.addClass(a),f.isFixed&&j.animate({top:h},{duration:.2,easing:"easeOut"})),!c&&FP.$sug&&(c=!0,FP.$sug.css({position:"fixed",top:f.isFixed?h+39:39})),e("#J_SearchFt").hide()):(b&&(b=!1,j.css("top",0),i.removeClass(a)),c&&FP.$sug&&(c=!1,FP.$sug.css({position:"absolute",top:k+72})),e("#J_SearchFt").show(),e("#J_SearchIcon").show())};g.on("scroll",k),g.fire("scroll")},h},{requires:["../../base/module","ua","node"]});KISSY.add("fp/mods/header/nav",function(a,b){var c=a.all,d=TB.Global.util,e=function(){var a=this;a.el=c("#J_Nav"),a.$NavGift=c("#J_NavGift"),a.events={"mouseenter .J_NavAD":"toggleNavADHandler","mouseleave .J_NavAD":"toggleNavADHandler"},a.init()};return a.extend(e,b),e.prototype.init=function(){var a=this;a.render()},e.prototype.render=function(){var a=this;a.renderAD(),a.renderGift()},e.prototype.bind=function(){var b=this;a.later(function(){b.$navAd.hide()},3e3),e.superclass.constructor.call(b)},e.prototype.renderAD=function(){var a=this,b=c(a.randomAD());if(b.length){var d=b.attr("data-ad"),e=b.children("a").attr("href");b.addClass("J_NavAD").append(['<a href="'+e+'" id="J_NavAd" class="nav-ad">','<img src="'+d+'">',"</a>"].join("")),a.$navAd=c("#J_NavAd"),a.bind()}},e.prototype.renderGift=function(){var a=this,b=a.$NavGift.attr("data-img"),c=a.$NavGift.attr("data-url");d.getTag()<=0&&(b=a.$NavGift.attr("data-gift-img"),c=a.$NavGift.attr("data-gift-url")),c&&b&&(a.$NavGift.children("a").attr("href",c).children("img").attr("src",b),a.$NavGift.show())},e.prototype.randomAD=function(){var b=this,d=c("li",b.el),e=[];return a.each(d,function(a){c(a).hasAttr("data-ad")&&e.push(a)}),e[parseInt(Math.random()*e.length)]},e.prototype.toggleNavADHandler=function(a){var b=this;"mouseenter"==a.type?b.$navAd.show():b.$navAd.hide()},e},{requires:["../../base/module"]});KISSY.add("fp/mods/notice/notice",function(a,b,c,d){var e=a.all,f=function(){this.el=e("#J_Notice"),this.init()};return a.extend(f,b),f.prototype.init=function(){this.render(),this.bind()},f.prototype.render=function(){var a=this;a.slide=new d("#J_Notice",{contentClass:"notice-bd",pannelClass:"mod",navClass:"notice-hd",eventType:"mouseenter"}),new c({url:"http://www.taobao.com/go/rgn/tb-fp/2014/notice.php",callbackName:"NOTICE",$target:".J_NoticeMod",cacheKey:"cache-notice-mod"})},f.prototype.bind=function(){var a=this;a.slide.on("beforeSwitch",function(b){a.load(b.pannelnode)})},f.prototype.load=function(b){if(!a.isObject(b)||!b.length)return!1;var d=b.attr("data-id");if(!d)return!1;var e=b.attr("data-callback");if(!e)return!1;var f=new c({url:"http://www.taobao.com/go/rgn/tb-fp/2014/"+d+".php",callbackName:e,$target:b,cacheKey:"cache-"+d+"-mod"});f.on("render",function(){b.removeAttr("data-id")})},f},{requires:["../../base/module","../../base/tms","gallery/slide/1.2/","ajax"]});KISSY.add("fp/base/tms",function(a,b,c,d,e){var f=b.all;return c.extend({initializer:function(){var b=this,f=a.now(),g=Math.floor(f/3e5),h=b.get("url"),i=b.get("cacheKey"),j=b.get("callbackName");return d({url:h,data:{t:g},dataType:"jsonp",jsonpCallback:j,timeout:20,cache:!0}).then(function(a){var d=a[0];return b.get("tpl")||(d=d[0].cont),c.cache(i,d),b.render(d),d}).fail(function(){var d=c.cache(i);return d&&(a.log("error:",h),d=e.parse(d),b.render(d)),d})},render:function(a){var b=this,d=b.get("$target");if(!d.length)return!1;var e,g=b.get("tpl");return e=g?c.renderTpl(g,a):a,d.append(f(e)).removeClass("loading"),b.fire("render",{data:a}),b}},{ATTRS:{$target:{value:"",getter:function(a){return f(a)}},url:{value:""},tpl:{value:""},cacheKey:{value:""},callbackName:{value:""}}})},{requires:["node","./base","io","json"]});KISSY.add("fp/base/base",function(a,b,c,d,e,f,g){var h=b.all;return a.mix(c,{$:h,Promise:e,offline:new f,renderTpl:function(b,c){return b&&a.isObject(c)?new d(b).render(c):""},goldlog:function(b,c,d){if(!window.goldlog)return!1;var e="/tbindex.2014."+b;/\//.test(b)&&(e=b),c&&(c=a.param(c)),goldlog.trace&&goldlog.trace(e,"",c||"",d||"")},cache:function(b,d){var e=c.offline;return e&&a.isString(b)?d?(a.isObject(d)&&(d=g.stringify(d)),e.setItem(b,d),d):e.getItem(b):!1},toJson:function(a){return g.parse(a)}}),c},{requires:["node","base","xtemplate","promise","gallery/offline/1.1/","json"]});KISSY.add("fp/mods/member/member",function(a,b,c){var d=a.all,e=TB.Global,f=e.util,g="//ju.mmstat.com/?url=http://i.taobao.com/my_taobao.htm?ad_id=&am_id=&cm_id=&pm_id=1501036000a02c5c3739",h="//wwc.taobaocdn.com/avatar/getAvatar.do?userNick={userNick}&width=80&height=80&type=sns",i="//vip.taobao.com",j="http://i"+f.getHost()+"/json/my_taobao_remind_data.htm?t="+a.now(),k=['<a href="//trade.taobao.com/trade/itemlist/list_bought_items.htm?_fmt.q._0.au=SEND&_fmt.q._0.c=ALL&_fmt.q._0.l=ALL&_fmt.q._0.t=ALL&action=itemlist/query_action&event_submit_do_query=1&from_tag=true&is_archive=false&is_archive_default=0&order=desc&page_num=1&user_type=0&nekot='+a.now()+'">',"<strong>{a}</strong>","待收货","</a>",'<a href="//trade.taobao.com/trade/itemlist/list_bought_items.htm?search=1&_fmt.q._0.au=NOT_PAID&_fmt.q._0.c=ALL&_fmt.q._0.l=ALL&_fmt.q._0.t=ALL&action=itemlist%2Fquery_action&event_submit_do_query=1">',"<strong>{b}</strong>","待付款","</a>",'<a href="//trade.taobao.com/trade/itemlist/list_bought_items.htm?event_submit_do_query=1&action=itemlist%2Fquery_action&user_type=0&_fmt.q._0.c=I_HAS_NOT_COMMENT&_fmt.q._0.au=ALL&nekot='+a.now()+'">',"<strong>{c}</strong>","待评价","</a>"].join(""),l=function(){this.el=d("#J_Member"),this.tag=f.getTag(),this.init()};return a.extend(l,b),l.prototype.init=function(){var a=this;if(e.isLogin){var b=d("#J_MemberClub");a.tag<1&&b.attr("href","//new.taobao.com");var c=d("#J_MemberPunch");c.attr("href","d5"==c.attr("data-spm")&&"//taojinbi.taobao.com/vip_home.htm?auto_take=true"||"//taojinbi.taobao.com/vip_home.htm"),a.render()}},l.prototype.render=function(){var b=this,e=d("#J_MemberHome"),k=d("#J_MemberNick"),l=d("#J_MemberAvatar"),m=d("#J_MemberVip");b.el.attr("data-spm",754897561),e.attr({href:g}),k.html(f.getNick()),l.attr({src:a.substitute(h,{userNick:f.getNick(!0)})}),isNaN(b.tag)||(m.addClass("vip-icon, vip-icon-"+f.getTag()).attr("href",i),c({url:j,success:function(a){b.remind(a)},dataType:"jsonp"}))},l.prototype.remind=function(b){var c=d("#J_MemberLogin"),e=d("#J_MemberLogout"),f="true"===b[6];f&&(c.html(a.substitute(k,{a:b[3],b:b[1][0],c:b[2]})).show(),e.animate({marginTop:"-45px"},.2,"easeOut"))},l},{requires:["../../base/module","ajax"]});KISSY.add("fp/mods/conve/conve",function(a,b,c,d){var e=10,f=a.all,g=f(document),h=f("body"),i=".J_mod",j="conve-hide",k="mod-hover",l=".conve-bd-box",m="conve-pc",n=".J_convePop",o=".J_conveCont",p=".J_conveClose",q="conve-bd-box-show",r='<div class="conve-bd-box" tabindex=-1><a href="javascript:;" target="_self" class="conve-bd-box-close J_conveClose" data-spm-click="gostr=/tbindex;locaid=d1">关闭</a></div>',s='<div class="conve-bd-item"><div class="conve-bd-loading"></div></div>',t="http://www.taobao.com/go/rgn/tb-fp/conve/css1.php",u=function(){var a=this;a.init()};return a.extend(u,c,{init:function(){var a=this;a.conveBody=f("#J_conveBd"),a.conveBody.addClass(m),a._getFile(t,a._getConfig)},_renderConveBox:function(){var a=this;a.line=0,a.bdWidth=a.conveBody.width(),a.modWidth=a.conveBody.one(i).width(),a.modHeight=a.conveBody.one(i).height()+2,a.moduleNum=Math.floor(a.bdWidth/a.modWidth),a.modBox=f(b.create(r)),a.conveBody.parent().parent().append(a.modBox),a._bindEvent()},_bindEvent:function(){var a=this;a.conveBody.delegate("mouseenter",i,a._inMod,a),a.conveBody.delegate("mouseleave",i,a._outMod,a),a.conveBody.delegate("keydown",i,a._getConveBoxKeyEvent,a),a.conveBody.delegate("click",i,a._stopPropagation,a),a.modBox.delegate("click",p,a.hideModule,a),a.modBox.on("keydown",a._listenModEvent,a),h.delegate("click",n,a._stopPropagation,a)},_getFile:function(b,c){var d=this;a.getScript(b,{success:function(){c.apply(d)}})},_getConfig:function(){var a=this;conveConfig.conve&&a._getFile(conveConfig.conve,a._renderConveBox)},_inMod:function(a){var b=this,c=f(a.currentTarget);c.attr("data-name")&&(b.modBox.hasClass(q)?b.showModule(c):b.inTimeout=setTimeout(function(){b.showModule(c)},150))},_outMod:function(){var a=this;clearTimeout(a.inTimeout)},_getConveBoxKeyEvent:function(a){var b=this,c=(a.currentTarget,a.keyCode);"27"==c&&b.hideModule(),"9"==c&&b.modBox.hasClass(q)&&b.modBox.getDOMNode().focus()},_listenModEvent:function(a){var b=this,c=f(a.target),d=c.nodeName(),e=a.keyCode;if(27==e&&"input"!=d&&(b.hideModule(),b.triggerNode.getDOMNode().focus()),9==e&&"input"==d||"a"==d){var g=b._getLastFocusNode(c.parent(o));g&&g.getDOMNode()==c.getDOMNode()&&(a.preventDefault(),b.modBox.getDOMNode().focus())}},_getLastFocusNode:function(a){if(!a)return null;for(var b=a.all("*"),c=b.length,d=c;d>0;){var e=f(b[--d]);if("a"==e.nodeName()&&e.html())return e;if("input"==e.nodeName()&&"hidden"!=e.attr("type"))return e}return null},_stopPropagation:function(a){a.stopPropagation()},showModule:function(a){var c=this,d=a.attr("data-name");if(!a.hasClass(k)&&d&&conveConfig[d]){if(c.modBox.hasClass(q)&&c.hideModule(),c.modName=d,c.triggerNode=a,c.triggerNode.getDOMNode().focus(),c._scrollToLine(),c._setTargetNodePosition(),c.modBox.addClass(q),c[c.modName])return c[c.modName].removeClass(j),void g.on("click",c._hideConveBox,c);c._getModule(c.modName),c[c.modName]=f(b.create(s)),c.modBox.append(c[d]),g.on("click",c._hideConveBox,c)}},_getModule:function(a){var b=this,c=b.getAjaxUrl("tms");b._getFile(conveConfig[a],function(){d.get(c,{ids:[a]},function(c){c.length&&b[a].html(c[0].cont,!0)})})},hideModule:function(){var a=this;if(a[a.modName]){a.oldLine=a.line,a.scrollToLine(0),a.modBox.removeClass(q),a[a.modName].addClass(j),a.triggerNode.removeClass(k),a._setDefaultTargetNodePosition();for(var b=f(n),c=0,d=b.length;d>c;c++){var e=b.item(c),h=e.style("visibility");"visible"==h&&e.css("visibility","hidden");var i=e.style("display");"block"==i&&e.css("display","none"),i||h||e.css("display","none")}g.detach("click",a._hideConveBox,a)}},_hideConveBox:function(a){var b=this,c=f(a.target);if(!b._outClick(c,i.slice(1))&&!b._outClick(c,l.slice(1))){for(var d=f(n),e=0,g=d.length;g>e;e++){var h=d.item(e);if("hidden"!=h.css("visibility")&&"none"!=h.css("display")){var j=h.style("visibility");if("visible"==j)return void h.css("visibility","hidden");var k=h.style("display");if("block"==k)return void h.css("display","none");if(!k&&!j)return void h.css("display","none");return}}b.hideModule(),b.oldLine=-1}},_outClick:function(a,b){return a.hasClass(b)||a.parent("."+b)},scrollToLine:function(a){var b=this;a!=b.line&&(b.line=a,b.conveBody.css("marginTop",-(a*b.modHeight+a*e)))},_scrollToLine:function(){var b=this,c=b.triggerNode.getDOMNode(),d=0;a.each(b.conveBody.all(i),function(a,b){a==c&&(d=b)}),b.scrollToLine(Math.ceil((d+1)/b.moduleNum)-1)},_setTargetNodePosition:function(){var a=this,b=a.triggerNode,c=a._isSupportAnima()?300:0,c=a.oldLine==a.line?0:300;setTimeout(function(){b.css("position","relative"),a.triggerNode.addClass(k)},c)},_setDefaultTargetNodePosition:function(){var a=this,b=a.triggerNode;a._positionTimeout&&a._positionTimeout.cancel(),b.css("position","")},_isSupportAnima:function(){var a=document.createElement("div");return"transition"in a.style?(a.style.transition="all","all"===a.style.transition):!1}}),u},{requires:["dom","../../base/module","ajax"]});KISSY.add("fp/mods/promo/promo",function(a,b,c){var d=a.all,e=function(){this.el=d("#J_Promo"),this.$opt=d("#J_PromoOpt"),this.events={"click .J_Prev":"prevHandler","click .J_Next":"nextHandler"},this.init()};return a.extend(e,b),e.prototype.init=function(){var a=this;a.render(),a.bind(),e.superclass.constructor.call(a),a.el.removeClass("loading")},e.prototype.render=function(){var a=this,b=a.el.attr("data-index")||0;a.slide=new c("#J_Promo",{contentClass:"promo-bd",pannelClass:"mod",navClass:"promo-nav",effect:"hSlide",timeout:5e3,carousel:!0,autoSlide:!0,touchmove:!0,defaultTab:parseInt(b)})},e.prototype.bind=function(){var a=this;a.el.on("mouseenter",function(){a.$opt.show()}),a.el.on("mouseleave",function(){a.$opt.hide()}),a.slide.on("beforeSwitch",function(b){var c=b.pannelnode,d=c.hasClass("J_Tanx");if(d){var e=c.attr("data-id");a.loadTanx(e),c.removeClass("J_Tanx")}})},e.prototype.prevHandler=function(a){var b=this;a.preventDefault(),b.slide.previous()},e.prototype.nextHandler=function(a){var b=this;a.preventDefault(),b.slide.next()},e},{requires:["../../base/module","gallery/slide/1.2/"]});KISSY.add("fp/mods/tmall/tmall",function(a,b,c){var d=a.all,e={load:!1,data:[],acm:"",scm:""},f="http://ald.taobao.com/recommend.htm?appId={appId}&callback={callback}",g=function(a){a&&(this.logoData=a["03014"].data,this.aldData=a),this.el=d("#J_Tmall"),this.$opt=d("#J_TmallOpt"),this.events={"click .J_Prev":"prevHandler","click .J_Next":"nextHandler"},this.init()};return a.extend(g,b),g.prototype.init=function(){var a=this;a.render(),a.bind(),g.superclass.constructor.call(a);var b=a.slide.pannels.item(1);a.loadTms(b),a.loadAld(b),a.exposure(b),a.el.removeClass("loading")},g.prototype.render=function(){var a=this;a.slide=new c("#J_Tmall",{contentClass:"tmall-bd",pannelClass:"mod",navClass:"tmall-nav",effect:"hSlide",timeout:5e3,carousel:!0,autoSlide:!0,touchmove:!0})},g.prototype.bind=function(){var a=this;a.el.on("mouseenter",function(){a.$opt.show()}),a.el.on("mouseleave",function(){a.$opt.hide()}),a.slide.on("beforeSwitch",function(b){var c=b.pannelnode;a.loadTms(c),a._loadTanx(c)}),a.slide.on("afterSwitch",function(b){var c=b.pannelnode;a.loadAld(c),a.exposure(c)})},g.prototype.exposure=function(a){var b=this;if(!b.aldData)return!1;var c=a.attr("data-ald");if(c){var d=b.aldData[c];if(d){var e=d.exposureParam;e&&b.trackPoint(e)}}},g.prototype.loadTms=function(a){var b=this;if(!a.data("load")){var c=d("img",a);a.addClass("mod-loaded"),c.each(function(a){var b=a.attr("data-lazy");b&&a.attr("src",b).removeAttr("data-lazy")});var e=a.attr("data-goldlog");e&&b.goldlog(e)}},g.prototype.makeUrl=function(b,c){return a.substitute(f,{appId:b,callback:c})},g.prototype._loadTanx=function(b){var c=this;if(b.hasClass("J_TanxWrapper")){var e=b.all("a");e.each(function(b){var d=a.trim(b.attr("id"));d=d.replace("tanx-a-",""),c.loadTanxAd(d)}),a.later(function(){var a=d(".J_TanxWrapper");if(a.all("img").length){var c=a.html();b.html(c).removeClass("J_TanxWrapper")}})}},g.prototype.loadAld=function(a){var b=this,c="J_Ald"===a.attr("id");a.data("load")||(c?b.loadLogos(a):b.loadBrands(a),a.data("load",!0))},g.prototype.loadLogos=function(a){var b=this,c=d("a",a),e=[],f=[];c.each(function(a){var b=d(a);b.hasAttr("data-ald")?e.push(b):f.push(b.attr("src"))}),e.length&&b.logoData?b.renderLogos(e,f,b.logoData,a):b.dot("1.2.2")},g.prototype.renderLogos=function(b,c,e,f){var g,h=this;if(!e)return!1;a.each(e,function(d,e){var f=d.img,h=d.title||"",i=d.url;if(!g){var j=i.split("?")[1];j=a.unparam(j),g=j.uuid}!a.inArray(f,c)&&b[e]&&b[e].attr({title:h,href:i}).children().attr({alt:h,src:f})}),e.length&&h.dot("1.2.1",e[0].acm,null,g),f.removeAttr("id");var i=d("#J_Ald");i.length&&i.html(f.html()).data("load",!0).removeAttr("id")},g.prototype.loadBrands=function(b){var c=this,f=d("a.J_Ald",b);f.length&&(e.load?c.renderBrands(f):a.jsonp(c.makeUrl("03084"),function(a){e.load=!0,e.data=a.brands,e.acm=a.acm,e.scm=a.scm,c.dot("1.2.1",e.acm,e.scm),c.renderBrands(f)}))},g.prototype.renderBrands=function(b){var c=e.data;a.each(b,function(a){var b=d(a),e=b.attr("id");if(c.length)for(var f=c.shift(),g=f.actUrl||"",h=f.imgUrl||"",i=f.actTitle||"";b.length;)b.attr("id","").removeClass("J_Ald"),b.attr("href",g).children("img").attr({src:h,alt:i}).removeAttr("data-lazy"),b=d("#"+e)})},g.prototype.dot=function(b,c,d,e){var f=this,g="http://ac.mmstat.com/1.gif?logtype=4&gokey=",h="com=02&apply=fixed&cod="+b;h+=c?"&acm="+c:"",h+=d?"&scm="+d:"",h+=e?"&uuid="+e:"",h+="&cache="+a.now(),g+=encodeURIComponent(h),f.trackPoint(g)},g.prototype.prevHandler=function(a){var b=this;a.preventDefault(),b.slide.previous()},g.prototype.nextHandler=function(a){var b=this;a.preventDefault(),b.slide.next()},g},{requires:["../../base/module","gallery/slide/1.2/","json"]});KISSY.add("fp/mods/promo/tanx",function(a,b,c,d){var e=function(){this.init()};a.extend(e,b);var f={s2_tl1:"mm_12852562_1778064_23036232",s2_r:"mm_12852562_1778064_10263209",s3_tl:"mm_12852562_1778064_10263233",s3_sm1:"mm_12852562_1778064_9087844",s3_sm2:"mm_12852562_1778064_22160952"},g={a2:"mm_12852562_1778064_13670999",a3:"mm_12852562_1778064_13674396",a4:"mm_12852562_1778064_13672849"};return e.prototype.init=function(){function b(b){this.run=function(){var c=b.length,d=Math.floor(Math.random()*c);a.getScript(f+b[d])}}var e=this,f="http://p.tanx.com/ex?i=",h=[];c.all(".J_lazy_TanxAd").each(function(a){var b=a.attr("id");h.push(b.split("-")[2])});var i=!1,j=!1;if(__tbSwitchers_&&__tbSwitchers_.tanx&&1==__tbSwitchers_.tanx.on){var k=d.parse(__tbSwitchers_.tanx.options);i=Math.random()<=k.rate,j=k.a2&&1==k.a2.on&&Math.random()<=k.a2.rate}c.all(".J_TanxAd").each(function(b){var c=b.attr("id");c=c.split("-")[2];var d="mm_33231655_8000000_22196529"===c;return a.inArray(c,h)?void e.addTolazyloadList(c,d):void((c!==g.a3&&c!==g.a4||!i)&&(c===g.a2&&j||e.loadTanx(c,d)))}),e.checkLazyloadList(),(window.innerWidth||document.documentElement.clientWidth+21)>=1366&&new b(["mm_12852562_1778064_9118786","mm_12852562_1778064_9118787"]).run()},e.prototype.lazyloadList=[],e.prototype.addTolazyloadList=function(b,c){var d,e=this,g=0;b===f.s2_r&&(g=1600),(b===f.s3_tl||b===f.s3_sm1||b===f.s3_sm2)&&(g=1200),b===f.s3_sm2&&(d=f.s3_sm2,b=f.s3_sm1);var h=a.one("#tanx-a-"+b).parent();f.s2_tl1===b&&(h=a.one("#J_BdMain")),e.lazyloadList.push({id:d||b,isToruk:c,top:h&&h.offset().top-g||0})},e.prototype.checkLazyloadList=function(){function b(){if(0===d.lazyloadList.length)return void e.detach("scroll resize",b);var c,f=e.height()+e.scrollTop(),g=0,h=10;for(c=d.lazyloadList.length;c>g;g++){var i=d.lazyloadList[g];i.top<=f-h&&(a.log("Lazyload Tanx: "+i.id),d.loadTanx(i.id,i.isToruk),d.lazyloadList.splice(g,1),g--,c--)}}var d=this,e=c.all(window);e.on("scroll resize",b)},e},{requires:["../../base/module","node","json"]});KISSY.add("fp/mods/apollon/apollon",function(a,b,c,d,e){var f=b.all,g=[20140506001,20140506002,20140506003,20140506004,20140506009,2014050610],h=[20140506008],i="http://tui.taobao.com/recommend?appid=1449",j="http://apollon.t.taobao.com/market/AllContentByPage.do?resourceIds=",k="apollon-data",l={results:[],pResults:[],offline:new d,init:function(a){this[a]()},load:function(b,c){if(0!=this.results.length)this.render(b,c);else{var d=this,e=j+g.join(",")+"&t="+a.now();a.getScript(e,{success:function(){var e=d.results=__content_results;a.isArray(e)&&e.length?d.render(b,c):d._fail(b,c)},error:function(){d._fail(b,c)},timeout:10})}},loadPer:function(b,c){if(0!=this.pResults.length)this.render(b,c);else{var d=this;e({url:i,data:{act:h.join(",")},dataType:"jsonp",cache:!1,timeout:5,success:function(e){var f=e&&e.result;if(a.isArray(f)&&f.length){for(var g=0,h=f.length;h>g;g++){var i=f[g];d.pResults[g]={id:String(i.extMap.posid),link:i.url,content:i.pic}}d.render(b,c)}else d._fail(b,c)},error:function(){d._fail(b,c)}})}},_fail:function(b,c){var d=this,f=d.loadCache(c);f.length?d.render(b,c):e({url:"http://www.taobao.com/go/rgn/tb-fp/2014/apollon.php",dataType:"jsonp",jsonpCallback:"APOLLON",timeout:20,cache:!0}).then(function(e){"udp"==c?(d.results=e[0].result,a.log("广告UDP接口挂了，读取TMS的兜底内容！")):(d.pResults=e[0].result,a.log("广告个性化接口挂了，读取TMS的兜底内容！")),d.render(b,c)}),a.isUndefined(goldlog)||goldlog.send&&goldlog.send("http://log.mmstat.com/tbindex.6.4")},renderHD:function(){var a=this;a.load(["20140506001","20140506002","20140506003","20140506004"],"udp")},renderCat:function(){var a=this;a.load(["20140506009","2014050610"],"udp");var b=!1;if(__tbSwitchers_&&__tbSwitchers_.apollon&&1==__tbSwitchers_.apollon.on){var d=c.parse(__tbSwitchers_.apollon.options);b=Math.random()<=d.rate}b?a.loadPer(["20140506008"],"personality"):a._fail(["20140506008"],"personality")},render:function(b,c){var d=this,e="udp"==c?d.results:d.pResults;return e.length||(e=d.loadCache(c)),e.length?void a.each(e,function(c){var d=c.id;a.each(b,function(a){if(a==d){var b=c.content||"",e=c.link||"",g=f(".J_DP_"+d);g.length&&g.html('<a href="'+e+'"><img src="'+b+'"></a>')}})}):!1},loadCache:function(a){var b=this,d=b.offline,e=[];return d?(e=d.getItem(k),e?"udp"==a?b.results=c.parse(e):b.pResults=c.parse(e):[]):e}};return l},{requires:["node","json","gallery/offline/1.1/","io"]});KISSY.add("fp/mods/response/response",function(a,b,c){var d=b.all,e={_init:function(){c.viewportWidth()<1190?d("body").addClass("w990"):d("body").removeClass("w990")},init:function(){a.UA.ie&&a.UA.ie<=8&&(this._init(),d(window).on("resize",this._init))}};return e},{requires:["node","dom"]});KISSY.add("fp/mods/birthday/index",function(a,b,c,d){var e=b.$,f=TB.Global.util.getNick(),g=d.parse(b.cache("cache-birthday_data")),h="http://vip.taobao.com/ajax/getUserOccurScene.do",i='<div id="J_Birthday" class="birthday" data-spm="1993084168">{content}<b>x</b><span></span><em></em></div>',j=function(){this.init()};return a.extend(j,b,{init:function(){var a=this;if(window.__tbSwitchers_&&1==window.__tbSwitchers_.birthday.on&&""!=f){var c=b.cache("cache-birthday_req"),d=c?c.split(":")[0]:0,e=c?c.split(":")[1]:null,h=c?c.split(":")[2]:null,i=(new Date).getDate(),j=(new Date).getHours();c&&g&&d==i&&f==h&&(1>e&&1>j||e>=1&&j>=1&&12>e&&12>j||e>=12&&j>=12)?a.render(g):a.getInfo()}},render:function(c){if(c&&c.code&&c.status){var g,h,j,k=c.code,l="",m=b.cache("cache-birthday_tap_"+f),n=m?m.split(":")[0]:0,o=m?m.split(":")[1]:0,p=(new Date).getDate(),q=(new Date).getHours();if(p!=n&&window.localStorage)for(j in localStorage)/cache-birthday_tap/.test(j)&&localStorage.removeItem(j);if(0==k)return void a.log("birthday模块请求失败");if(-1!=k&&1==k){if(b.cache("cache-birthday_req",p+":"+q+":"+f),b.cache("cache-birthday_data",d.stringify(c)),g=c.data.info||[],m&&n==p&&"1"==o)return;if(3!=g.length)return;l=g[0]+"<a href='"+g[2]+"' target='_blank'>"+g[1]+"</a>",h=a.substitute(i,{content:l}),e("#J_Wrap").prepend(h),e("#J_Birthday").css("top",-1*(e("#J_Wrap").offset().top-e("#J_SiteNav").height()-6)),b.cache("cache-birthday_tap_"+f,p+":0"),e("#J_Birthday b").on("click",function(a){a.halt(),e(a.currentTarget).parent().remove()}),e("#J_Birthday a").on("click",function(){b.cache("cache-birthday_tap_"+f,p+":1")})}}},getInfo:function(){var a=this;c({url:h,type:"GET",dataType:"jsonp",data:{nick:f},cache:!1,timeout:5,success:function(b){a.render(b)},error:function(){a.render(g)}})}}),j},{requires:["../../base/base","io","json"]});