/*2014-08-14 11:34:13*/!function(t){var e=11,n=window,o=document,i=0,r=1,a=document.documentElement.clientHeight,s=0,l=500,c=1;if(!(t._ap_xwj&&e<=t._ap_xwj.version)){var d,h={layout:0,watch:null,sample_rate:1},u=function(t){return"number"==typeof t},g=function(t){return"[object Array]"===Object.prototype.toString.call(t)},m=function(t){for(var e=1,n=arguments.length;n>e;e++){var o=arguments[e];for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])}return t},f=function(){for(var t="",e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";t.length<16;)t+=e.substr(Math.floor(62*Math.random()),1);return t},p=function(t){var e,n,i,r,a,s,l=o.getElementsByTagName("*");for(e=[];t&&1==t.nodeType;t=t.parentNode)if(t.id){for(s=t.id,r=0,n=0;n<l.length;n++)if(a=l[n],a.id&&a.id==s){r++;break}if(e.unshift(t.tagName.toLowerCase()+'[@id="'+s+'"]'),1==r)return e.unshift("/"),e.join("/")}else{for(n=1,i=t.previousSibling;i;i=i.previousSibling)i.tagName==t.tagName&&n++;e.unshift(t.tagName.toLowerCase()+"["+n+"]")}return e.length?"/"+e.join("/"):null},v=function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e+"="+encodeURIComponent(t[e]));return n.join("&")},w=function(t,e,n){var o=Math.max(x.scrollWidth,x.clientWidth),i=x.scrollTop,r=x.scrollLeft,a=e.pageX,s=e.pageY;u(a)||(a=e.clientX+r,s=e.clientY+i);var l,c,d=-1;if(t&&t.getBoundingClientRect&&(c=t.getBoundingClientRect(),d=c.left+r,l=c.top+i),0==n){var h=o>>1;a-=h,d-=h}else 2==n&&(a-=o,d-=o);return{x:a,y:s,ex:d,ey:l}},y=f(),x="BackCompat"==o.compatMode?o.body:o.documentElement,b=navigator.userAgent,_=t.screen.width,T=t.screen.height,M=x.clientWidth,j=x.clientHeight,E=o.referrer,C=location,S=C.href,I=C.protocol,L="https:"==I,k=(new Date).getTime(),B=(new Date).getTime(),N=0,D=I+(L?"//log":"//gm")+".mmstat.com/ued.1.1.2?logtype=2&_gm:id=xwj&cache=",W="http://youshu.taobao.org",A=function(t,e){this.id=t,this.config=e,this.initialized=!1,this.watchList=[];var n=this.config.watch;if(g(n)&&0!=n.length){for(var o=0,i=n.length;i>o;o++)this.watchList[n[o]]=1;this.hasWatch=!0}};A.prototype={startup:function(){this["spm-cnt"]=t.goldlog&&t.goldlog.spm_ab?t.goldlog.spm_ab:null,this.sendPV(),this.bindMonitor()},sendPV:function(){if(!this.initialized){var t={type:0,id:this.id,pvid:y,ua:b,sw:_,sh:T,vw:M,vh:j,ref:E,url:S};this["spm-cnt"]&&(t["spm-cnt"]=this["spm-cnt"].join(".")),this.initialized=!0,this.sendData(D+Math.random(),t)}},bindMonitor:function(){var e=this,n=!!o.attachEvent,i=n?"attachEvent":"addEventListener";o[i]((n?"on":"")+"mousedown",function(n){n=n||t.event;var o=n.target||n.srcElement;o&&e.mousedown(o,n)},!1)},initPostMessage:function(){function t(t){return"display:"+t+";pointer-events:none;position:absolute;width:1200px;top:0;left:50%;margin-left:-600px;z-index: 10000000;"}function e(t){return"display:"+t+";pointer-events:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;opacity:0.3;z-index: 1000000"}window.parent!=window&&(window.top.postMessage("ready:ready",W),window.addEventListener("message",function(n){if(n.origin==W){var i,r,a=n.data,s=a.split("="),l=s[0],c=decodeURIComponent(s[1]);if("showImg"==l)(i=document.getElementById("xwj_heat"))&&(r=document.getElementById("xwj_overlay"))?(i.src=c,i.style.cssText=t("block"),r.style.cssText=e("block")):(r=document.createElement("div"),r.id="xwj_overlay",r.style.cssText=e("block"),document.body.appendChild(r),i=document.createElement("img"),i.src=c,i.id="xwj_heat",i.style.cssText=t("block"),document.body.appendChild(i));else if("hideImg"==l)(i=document.getElementById("xwj_heat"))&&(r=document.getElementById("xwj_overlay"))&&(i.style.cssText=t("none"),r.style.cssText=e("none"));else if("getScrollTop"==l){var d=o.documentElement.scrollTop||o.body.scrollTop;n.source.postMessage("scrollTop:"+d,n.origin)}}}))},initScroll:function(){var t=this;return!n.goldlog&&l>s?(s++,void setTimeout(function(){t.initScroll()},200)):void(n.goldlog&&(goldlog.on(n,"scroll",function(){t.getMaxScroll()}),goldlog.on(n,"beforeunload",function(){c=t.getCurrentScroll(),r=c>r?c:r,t.sendData(D+Math.random(),{type:2,scroll:1,g_max_view:r,g_exit_view:c,"spm-cnt":(goldlog.spm_ab||[]).join(".")})})))},getMaxScroll:function(){var t=o.documentElement.scrollTop||o.body.scrollTop;i=t>i?t:i,r=Math.ceil(i/a)+1},getCurrentScroll:function(){var t=o.documentElement.scrollTop||o.body.scrollTop;return Math.ceil(t/a)+1},mousedown:function(t,e){var n,o,i,r=this,a=t,s=t.tagName,l=!1,c={type:1,id:this.id,pvid:y};if(!s||"HTML"!=s){if(this.hasWatch)for(;a;){if(a.id&&(n=this.watchList[a.id])||!(o=a.parentNode)){o&&(l=!0);break}a=o}if(l||!this.hasWatch){("A"==s||"AREA"==s)&&(i=t.getAttribute("href",2)||"",c.href=i);var d=w(t,e,this.config.layout),h=(new Date).getTime();c.xpath=p(t),c.x=d.x,c.y=d.y,c.ex=d.ex,c.ey=d.ey,c.ew=t.offsetWidth,c.eh=t.offsetHeight,c.t=h-k,c.t2=h-B,c.n=++N,c.screen=r.getCurrentScroll(),B=h,this["spm-cnt"]&&(c["spm-cnt"]=this["spm-cnt"].join(".")),this.sendData(D+Math.random(),c)}}},sendData:function(e,n){var o=new Image,i="_img_"+Math.random(),r=-1==e.indexOf("?")?"?":"&";t[i]=o,o.onload=o.onerror=function(){t[i]=null},o.src=e+r+v(n),o=null}},t._ap_xwj={version:e,monitor:function(t,e){if(t){d=m({},h,e);var n=new A(t,d);n.initPostMessage();var o=Math.random();if(o<d.sample_rate){try{n.initScroll()}catch(i){}n.startup(),this.getId=function(){return t}}}}}}}(window);