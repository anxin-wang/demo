DP.provide(["io/jsonp","util/json"],function(e,m,i){function n(c,a){for(var a=a||"data-",c=g(c),d={},f,j=[],b=0,e=c.el(0).attributes,h=e.length;b<h;b++)f=e.item(b).nodeName,0==f.indexOf(a)&&j.push(f);j.forEach(function(b){d[b.split(a)[1]]=c.attr(b)});return d}function p(c){function a(){j&&(h=g.all([b,o].join(" ")));var a,i=h.el().indexOf(this)+1,m=q[f]||dpga;a=n(this);var p=n(this,"data-"+f+"-"),k={index:i};e.mix(k,l);e.mix(k,a);e.mix(k,p);a=e.sub(c.key,k);m.call(this,e.sub(a,{n:i}),d,k)}var d=c.action,
f=c.cb,j=c.delegate,b=c.parent,o=c.selector,h=g.all([b,o].join(" "));"hover"==d&&(d="mouseenter");if("show"==d&&h.count())h.forEach(function(b){a.call(b)});else if(j)r.on(b,d,o,a);else h.on(d,a)}var g=e.DOM,s=g("#ga-conductor"),l={n:"{n}"},q={},r={on:function(c,a,d,e){g(c).on(a,function(a){for(var b=g(a.target);b.el(0)!==document.body&&b.count();)b.match(d)&&e.call(a.target),b=b.parent()})}};e.mix(l,n(s));(new m({url:"http://conductor.dianping.com/api/page/"+l.pagekey})).on("success",function(c){var a,
d;try{d=i.parse(c.callback);for(var f in d)q[f]=new Function("key,action,attrs",d[f])}catch(g){}try{a=i.parse(c.config),a.pv&&dpga(e.sub(a.pv,l)),a.rules.forEach(p)}catch(b){}}).send()});
